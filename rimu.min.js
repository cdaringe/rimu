!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Rimu=t():e.Rimu=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){"use strict";function r(e){return e.replace(/^\s+/g,"")}function i(e){return e.replace(/\s+$/g,"")}function a(e){return e.replace(/^\s+|\s+$/g,"")}function o(e){return e.replace(/[\-\/\\^$*+?.()|\[\]{}]/g,"\\$&")}function s(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}function c(e,t,n){return void 0===n&&(n={}),t.replace(/(\${1,2})(\d)/g,function(){"$$"===arguments[1]?n.spans=!0:n.specials=!0;var t=Number(arguments[2]);return p(e[t],n)})}function l(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function u(e,t){for(var n in t)e[n]=t[n]}function p(e,t){return t.macros&&(e=d.render(e),e=null===e?"":e),t.spans?e=h.render(e):t.specials&&(e=s(e)),e}Object.defineProperty(t,"__esModule",{value:!0});var f=n(2),d=n(3),m=n(1),h=n(7);t.trimLeft=r,t.trimRight=i,t.trim=a,t.escapeRegExp=o,t.replaceSpecialChars=s,t.replaceMatch=c,t.copy=l,t.merge=u,t.replaceInline=p;!function(e){function t(){e.classes="",e.id="",e.css="",e.attributes="",e.options={},o=[]}function n(t){var n=t[0];n=p(n,{macros:!0});var r=/^\\?\.((?:\s*[a-zA-Z][\w\-]*)+)*(?:\s*)?(#[a-zA-Z][\w\-]*\s*)?(?:\s*)?(".+?")?(?:\s*)?(\[.+])?(?:\s*)?([+-][ \w+-]+)?$/.exec(n);return!!r&&(m.skipBlockAttributes()||(r[1]&&(e.classes+=" "+a(r[1]),e.classes=a(e.classes)),r[2]&&(e.id=a(r[2]).slice(1)),r[3]&&(e.css=r[3]),r[4]&&!m.isSafeModeNz()&&(e.attributes+=" "+a(r[4].slice(1,r[4].length-1)),e.attributes=a(e.attributes)),f.setBlockOptions(e.options,r[5])),!0)}function r(t){if(!t)return t;var n="";if(e.classes&&(/class="\S.*"/.test(t)?t=t.replace(/class="(\S.*?)"/,'class="'+e.classes+' $1"'):n='class="'+e.classes+'"'),e.id&&(o.push(e.id),n+=' id="'+e.id+'"'),e.css&&(n+=" style="+e.css),e.attributes&&(n+=" "+e.attributes),n=a(n)){var r=t.match(/^<([a-zA-Z]+|h[1-6])(?=[ >])/);if(r){t=t.slice(0,r[0].length)+" "+n+t.slice(r[0].length)}}return e.classes="",e.id="",e.css="",e.attributes="",t}function i(e){var t=e.replace(/\W+/g,"-").replace(/-+/g,"-").replace(/(^-)|(-$)/g,"").toLowerCase();if(t||(t="x"),o.indexOf(t)>-1){for(var n=2;o.indexOf(t+"-"+n)>-1;)n++;t+="-"+n}return t}var o;e.init=t,e.parse=n,e.inject=r,e.slugify=i}(t.BlockAttributes||(t.BlockAttributes={}))},function(e,t,n){"use strict";function r(){m=0,h="<mark>replaced HTML</mark>",g=void 0}function i(){return 0!==m}function a(){return 0!==m&&!(8&m)}function o(){return 0!==m&&!!(4&m)}function s(e){var t=Number(e);isNaN(t)||(m=t)}function c(e){void 0!==e&&(h=e)}function l(e){!0!==e&&"true"!==e||v.init()}function u(e){"reset"in e&&l(e.reset),"safeMode"in e&&s(e.safeMode),"htmlReplacement"in e&&c(e.htmlReplacement),"callback"in e&&(g=e.callback)}function p(e,t){var n={};n[e]=t,u(n)}function f(e){switch(3&m){case 0:return e;case 1:return"";case 2:return h;case 3:return $.replaceSpecialChars(e);default:return""}}function d(e){g&&g({type:"error",text:e})}Object.defineProperty(t,"__esModule",{value:!0});var m,h,g,v=n(4),$=n(0);t.init=r,t.isSafeModeNz=i,t.skipMacroDefs=a,t.skipBlockAttributes=o,t.updateOptions=u,t.setOption=p,t.htmlSafeModeFilter=f,t.errorCallback=d},function(e,t,n){"use strict";function r(){t.defs=g.map(function(e){return f.copy(e)}),t.defs.forEach(function(e,t){return e.expansionOptions=f.copy(g[t].expansionOptions)})}function i(e,n){if(e.eof())throw"premature eof";for(var r=0,i=t.defs;r<i.length;r++){var a=i[r],o=e.cursor.match(a.openMatch);if(o){if("\\"===o[0][0]&&"paragraph"!==a.name){e.cursor=e.cursor.slice(1);continue}if(a.verify&&!a.verify(o))continue;var s=a.delimiterFilter?a.delimiterFilter(o):"",c=[];s&&c.push(s),e.next();var l=e.readTo(a.closeMatch);null===l&&d.errorCallback("unterminated delimited block: "+o[0]),l&&(c=c.concat(l));var m={macros:!1,spans:!1,specials:!1,container:!1,skip:!1};if(f.merge(m,a.expansionOptions),f.merge(m,p.BlockAttributes.options),!m.skip){var h=c.join("\n");a.contentFilter&&(h=a.contentFilter(h,o,m));var g=a.openTag;"html"===a.name?h=p.BlockAttributes.inject(h):g=p.BlockAttributes.inject(g),m.container?(delete p.BlockAttributes.options.container,h=u.render(h)):h=f.replaceInline(h,m);var v=a.closeTag;"division"===a.name&&"<div>"===g&&(g="",v=""),n.write(g),n.write(h),n.write(v),(g||h||v)&&!e.eof()&&n.write("\n")}return p.BlockAttributes.options={},!0}}return!1}function a(e){return t.defs.filter(function(t){return t.name===e})[0]}function o(e,t){if(t)for(var n=t.trim().split(/\s+/),r=0,i=n;r<i.length;r++){var a=i[r];d.isSafeModeNz()&&"-specials"===a?d.errorCallback("-specials block option not valid in safeMode"):/^[+-](macros|spans|specials|container|skip)$/.test(a)?e[a.slice(1)]="+"===a[0]:d.errorCallback("illegal block option: "+a)}}function s(e,t){var n=a(e);if(!n)return void d.errorCallback("illegal delimited block name: "+e+": |"+e+"|='"+t+"'");var r=f.trim(t).match(/^(?:(<[a-zA-Z].*>)\|(<[a-zA-Z\/].*>))?(?:\s*)?([+-][ \w+-]+)?$/);r&&(r[1]&&(n.openTag=r[1],n.closeTag=r[2]),o(n.expansionOptions,r[3]))}function c(e){return e[1]}function l(e){if(e[2]){var t=void 0;(t=f.trim(e[2]))&&(p.BlockAttributes.classes=t)}return this.closeMatch=RegExp("^"+f.escapeRegExp(e[1])+"$"),""}Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),p=n(0),f=n(0),d=n(1),m=n(3),h=/^(a|abbr|acronym|address|b|bdi|bdo|big|blockquote|br|cite|code|del|dfn|em|i|img|ins|kbd|mark|q|s|samp|small|span|strike|strong|sub|sup|time|tt|u|var|wbr)$/i,g=[{openMatch:m.MACRO_DEF_OPEN,closeMatch:m.MACRO_DEF_CLOSE,openTag:"",closeTag:"",expansionOptions:{macros:!0},delimiterFilter:c,contentFilter:function(e,t,n){if(d.skipMacroDefs())return"";var r=t[0].match(/^{([\w\-]+\??)}/)[1];return e=e.replace(/' *\\\n/g,"'\n"),e=e.replace(/(' *[\\]+)\\\n/g,"$1\n"),e=f.replaceInline(e,n),m.setValue(r,e),""}},{name:"comment",openMatch:/^\\?\/\*+$/,closeMatch:/^\*+\/$/,openTag:"",closeTag:"",expansionOptions:{skip:!0,specials:!0}},{name:"division",openMatch:/^\\?(\.{2,})([\w\s-]*)$/,openTag:"<div>",closeTag:"</div>",expansionOptions:{container:!0,specials:!0},delimiterFilter:l},{name:"quote",openMatch:/^\\?("{2,})([\w\s-]*)$/,openTag:"<blockquote>",closeTag:"</blockquote>",expansionOptions:{container:!0,specials:!0},delimiterFilter:l},{name:"code",openMatch:/^\\?(-{2,}|`{2,})([\w\s-]*)$/,openTag:"<pre><code>",closeTag:"</code></pre>",expansionOptions:{macros:!1,specials:!0},verify:function(e){return!("-"===e[1][0]&&""!==f.trim(e[2]))},delimiterFilter:l},{name:"html",openMatch:/^(<!--.*|<!DOCTYPE(?:\s.*)?|<\/?([a-z][a-z0-9]*)(?:[\s>].*)?)$/i,closeMatch:/^$/,openTag:"",closeTag:"",expansionOptions:{macros:!0},verify:function(e){return!e[2]||!h.test(e[2])},delimiterFilter:c,contentFilter:d.htmlSafeModeFilter},{name:"indented",openMatch:/^\\?(\s+.*)$/,closeMatch:/^$/,openTag:"<pre><code>",closeTag:"</code></pre>",expansionOptions:{macros:!1,specials:!0},delimiterFilter:c,contentFilter:function(e){var t=e.search(/\S/),n=e.split("\n");for(var r in n){var i=n[r].search(/\S|$/);i>t&&(i=t),n[r]=n[r].slice(i)}return n.join("\n")}},{name:"quote-paragraph",openMatch:/^\\?(>.*)$/,closeMatch:/^$/,openTag:"<blockquote><p>",closeTag:"</p></blockquote>",expansionOptions:{macros:!0,spans:!0,specials:!0},delimiterFilter:c,contentFilter:function(e){var t=e.split("\n");for(var n in t)t[n]=t[n].replace(/^>/,""),t[n]=t[n].replace(/^\\>/,">");return t.join("\n")}},{name:"paragraph",openMatch:/(.*)/,closeMatch:/^$/,openTag:"<p>",closeTag:"</p>",expansionOptions:{macros:!0,spans:!0,specials:!0},delimiterFilter:c}];t.init=r,t.render=i,t.getDefinition=a,t.setBlockOptions=o,t.setDefinition=s},function(e,t,n){"use strict";function r(){t.defs=[],a("--",""),a("--header-ids","")}function i(e){for(var n=0,r=t.defs;n<r.length;n++){var i=r[n];if(i.name===e)return i.value}return null}function a(e,n){var r=!1;"?"===e.slice(-1)&&(e=e.slice(0,-1),r=!0);for(var i=0,a=t.defs;i<a.length;i++){var o=a[i];if(o.name===e)return void(r||(o.value=n))}t.defs.push({name:e,value:n})}function o(e,t){if(void 0===t&&(t=!0),e=e.replace(u,function(n){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];if("\\"===n[0])return n.slice(1);var o=r[0],l=r[1]||"";if("?"===l[0])return t&&s.errorCallback("existential macro invocations are deprecated: "+n),n;var u=i(o);if(null===u)return t&&s.errorCallback("undefined macro: "+n+": "+e),n;switch(l=l.replace(/\\}/g,"}"),l[0]){case"|":var p=l.slice(1).split("|"),f=/\\?(\$\$?)(\d+)(\\?:(|[^]*?[^\\])\$)?/g;return u=(u||"").replace(f,function(e,t,n,r,i){if("\\"===e[0])return e.slice(1);var a=p[Number(n)-1];return a=void 0===a?"":a,void 0!==r&&("\\"===r[0]?a+=r.slice(1):""===a&&(a=i,a=a.replace(/\\\$/g,"$"))),"$$"===t&&(a=c.render(a)),a});case"!":case"=":var d=l.slice(1),m=!RegExp("^"+d+"$").test(u||"");return"!"===l[0]&&(m=!m),m?"\0":"";default:return u||""}}),-1!==e.indexOf("\0")){for(var n=e.split("\n"),r=n.length-1;r>=0;--r)-1!==n[r].indexOf("\0")&&n.splice(r,1);e=n.join("\n")}return e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),c=n(7),l=/{([\w\-]+)([!=|?](?:|[^]*?[^\\]))?}/,u=RegExp("\\\\?"+l.source,"g");t.MACRO_LINE=RegExp("^"+l.source+".*$"),t.MACRO_DEF_OPEN=/^\\?{[\w\-]+\??}\s*=\s*'(.*)$/,t.MACRO_DEF_CLOSE=/^(.*)'$/,t.MACRO_DEF=/^\\?{([\w\-]+\??)}\s*=\s*'(.*)'$/,t.defs=[],t.init=r,t.getValue=i,t.setValue=a,t.render=o},function(e,t,n){"use strict";function r(e){for(var t=new s.Reader(e),n=new s.Writer;!t.eof()&&(t.skipBlankLines(),!t.eof());)if(!c.render(t,n)&&!l.render(t,n)&&!o.render(t,n))throw"unexpected error: no matching delimited block found";return n.toString()}function i(){a.BlockAttributes.init(),p.init(),o.init(),u.init(),f.init(),d.init()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=n(8),c=n(10),l=n(11),u=n(3),p=n(1),f=n(5),d=n(6);t.render=r,t.init=i},function(e,t,n){"use strict";function r(){c=p.map(function(e){return u.copy(e)}),i()}function i(){var e=c.map(function(e){return u.escapeRegExp(e.quote)});t.quotesRe=RegExp("\\\\?("+e.join("|")+")([^\\s\\\\]|\\S[\\s\\S]*?[^\\s\\\\])\\1","g"),l=RegExp("\\\\("+e.join("|")+")","g")}function a(e){return c.filter(function(t){return t.quote===e})[0]}function o(e){return e.replace(l,"$1")}function s(e){for(var t=0,n=c;t<n.length;t++){var r=n[t];if(r.quote===e.quote)return r.openTag=e.openTag,r.closeTag=e.closeTag,void(r.spans=e.spans)}2===e.quote.length?c.unshift(e):c.push(e),i()}Object.defineProperty(t,"__esModule",{value:!0});var c,l,u=n(0),p=[{quote:"**",openTag:"<strong>",closeTag:"</strong>",spans:!0},{quote:"*",openTag:"<em>",closeTag:"</em>",spans:!0},{quote:"__",openTag:"<strong>",closeTag:"</strong>",spans:!0},{quote:"_",openTag:"<em>",closeTag:"</em>",spans:!0},{quote:"``",openTag:"<code>",closeTag:"</code>",spans:!1},{quote:"`",openTag:"<code>",closeTag:"</code>",spans:!1},{quote:"~~",openTag:"<del>",closeTag:"</del>",spans:!0}];t.init=r,t.initializeRegExps=i,t.getDefinition=a,t.unescape=o,t.setDefinition=s},function(e,t,n){"use strict";function r(){t.defs=s.map(function(e){return o.copy(e)})}function i(e,n,r){/g/.test(n)||(n+="g");for(var i=0,a=t.defs;i<a.length;i++){var o=a[i];if(o.match.source===e)return o.match=new RegExp(e,n),void(o.replacement=r)}t.defs.push({match:new RegExp(e,n),replacement:r})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(0),s=[{match:/\\?<<#([a-zA-Z][\w\-]*)>>/g,replacement:'<span id="$1"></span>',filter:function(e){return a.skipBlockAttributes()?"":o.replaceMatch(e,this.replacement)}},{match:/\\?<image:([^\s|]+)\|([^]*?)>/g,replacement:'<img src="$1" alt="$2">'},{match:/\\?<image:([^\s|]+?)>/g,replacement:'<img src="$1" alt="$1">'},{match:/\\?!\[([^[]*?)]\((\S+?)\)/g,replacement:'<img src="$2" alt="$1">'},{match:/\\?<(\S+@[\w.\-]+)\|([^]+?)>/g,replacement:'<a href="mailto:$1">$$2</a>'},{match:/\\?<(\S+@[\w.\-]+)>/g,replacement:'<a href="mailto:$1">$1</a>'},{match:/\\?\[([^[]*?)]\((\S+?)\)/g,replacement:'<a href="$2">$$1</a>'},{match:/\\?<(\S+?)\|([^]*?)>/g,replacement:'<a href="$1">$$2</a>'},{match:/\\?(<!--(?:[^<>&]*)?-->|<\/?([a-z][a-z0-9]*)(?:\s+[^<>&]+)?>)/gi,replacement:"",filter:function(e){return a.htmlSafeModeFilter(e[1])}},{match:/\\?<([^|\s]+?)>/g,replacement:'<a href="$1">$1</a>'},{match:/\\?((?:http|https):\/\/[^\s"']*[A-Za-z0-9\/#])/g,replacement:'<a href="$1">$1</a>'},{match:/\\?(&[\w#][\w]+;)/g,replacement:"",filter:function(e){return e[1]}},{match:/[\\ ]\\(\n|$)/g,replacement:"<br>$1"},{match:/(\S\\)(?=`)/g,replacement:"$1"},{match:/([a-zA-Z0-9]_)(?=[a-zA-Z0-9])/g,replacement:"$1"}];t.init=r,t.setDefinition=i},function(e,t,n){"use strict";function r(e){var t;t=s(e);var n=[{text:t,done:!1}];return n=a(n),p(n),t=i(n),c(t)}function i(e){return e.reduce(function(e,t){return e+t.text},"")}function a(e){var t;return t=[],e.forEach(function(e){t.push.apply(t,o(e))}),t.filter(function(e){return!e.done}).forEach(function(e){return e.text=f.unescape(e.text)}),t}function o(e){if(e.done)return[e];var t,n=f.quotesRe;for(n.lastIndex=0;;){if(!(t=n.exec(e.text)))return[e];if("\\"!==t[0][0])break;n.lastIndex=t.index+t[1].length+1}for(var r=[],i=f.getDefinition(t[1]);e.text[n.lastIndex]===t[1][0];)t[2]+=t[1][0],n.lastIndex+=1;var a=t.input.slice(0,t.index),s=t[2],c=t.input.slice(n.lastIndex);return r.push({text:a,done:!1}),r.push({text:i.openTag,done:!0}),i.spans?r.push.apply(r,o({text:s,done:!1})):(s=m.replaceSpecialChars(s),s=s.replace(/\u0000/g,""),r.push({text:s,done:!0})),r.push({text:i.closeTag,done:!0}),r.push.apply(r,o({text:c,done:!1})),r}function s(e){return h=[],l([{text:e,done:!1}]).reduce(function(e,t){return t.done?(h.push(t),e+"\0"):e+t.text},"")}function c(e){return e.replace(/[\u0000\u0001]/g,function(e){var t=h.shift();return"\0"===e?t.text:m.replaceSpecialChars(t.verbatim)})}function l(e){var t;return d.defs.forEach(function(n){t=[],e.forEach(function(e){t.push.apply(t,u(e,n))}),e=t}),e}function u(e,t){if(e.done)return[e];var n,r=t.match;if(r.lastIndex=0,!(n=r.exec(e.text)))return[e];var i=[],a=n.input.slice(0,n.index),o=n.input.slice(r.lastIndex);i.push({text:a,done:!1});var s;return s="\\"===n[0][0]?m.replaceSpecialChars(n[0].slice(1)):t.filter?t.filter(n):m.replaceMatch(n,t.replacement),i.push({text:s,done:!0,verbatim:n[0]}),i.push.apply(i,u({text:o,done:!1},t)),i}function p(e){e.filter(function(e){return!e.done}).forEach(function(e){return e.text=m.replaceSpecialChars(e.text)})}Object.defineProperty(t,"__esModule",{value:!0});var f=n(5),d=n(6),m=n(0);t.render=r;var h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.lines=e.split(/\r\n|\r|\n/g),this.pos=0}return Object.defineProperty(e.prototype,"cursor",{get:function(){return console.assert(!this.eof()),this.lines[this.pos]},set:function(e){console.assert(!this.eof()),this.lines[this.pos]=e},enumerable:!0,configurable:!0}),e.prototype.eof=function(){return this.pos>=this.lines.length},e.prototype.next=function(){this.eof()||this.pos++},e.prototype.readTo=function(e){for(var t=[],n=null;!this.eof();){if(n=this.cursor.match(e)){void 0!==n[1]&&t.push(n[1]),this.next();break}t.push(this.cursor),this.next()}return n||"/^$/"===e.toString()&&this.eof()?t:null},e.prototype.skipBlankLines=function(){for(;!this.eof()&&""===this.cursor;)this.next()},e}();t.Reader=r;var i=function(){function e(){this.buffer=[]}return e.prototype.write=function(e){this.buffer.push(e)},e.prototype.toString=function(){return this.buffer.join("")},e}();t.Writer=i},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t={}),a.updateOptions(t),i.render(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=n(1);t.render=r,i.init()},function(e,t,n){"use strict";function r(e,t){if(e.eof())throw"premature eof";for(var n=0,r=f;n<r.length;n++){var i=r[n],o=i.match.exec(e.cursor);if(o){if("\\"===o[0][0]){e.cursor=e.cursor.slice(1);continue}if(i.verify&&!i.verify(o))continue;var s=void 0;return s=i.filter?i.filter(o,e):i.replacement?p.replaceMatch(o,i.replacement,{macros:!0}):"",s?(s=a.BlockAttributes.inject(s),t.write(s),e.next(),e.eof()||t.write("\n")):e.next(),!0}}return!1}function i(e){return f.filter(function(t){return t.name===e})[0]}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=n(3),c=n(1),l=n(5),u=n(6),p=n(0),f=[{match:s.MACRO_LINE,verify:function(e){return!s.MACRO_DEF_OPEN.test(e[0])&&s.render(e[0],!1)!==e[0]},filter:function(e,t){var n=s.render(e[0],!1),r=[t.pos+1,0].concat(n.split("\n"));return Array.prototype.splice.apply(t.lines,r),""}},{match:/^\\?\|([\w\-]+)\|\s*=\s*'(.*)'$/,filter:function(e){return c.isSafeModeNz()?"":(e[2]=p.replaceInline(e[2],{macros:!0}),o.setDefinition(e[1],e[2]),"")}},{match:/^(\S{1,2})\s*=\s*'([^|]*)(\|{1,2})(.*)'$/,filter:function(e){return c.isSafeModeNz()?"":(l.setDefinition({quote:e[1],openTag:p.replaceInline(e[2],{macros:!0}),closeTag:p.replaceInline(e[4],{macros:!0}),spans:"|"===e[3]}),"")}},{match:/^\\?\/(.+)\/([igm]*)\s*=\s*'(.*)'$/,filter:function(e){if(c.isSafeModeNz())return"";var t=e[1],n=e[2],r=e[3];return r=p.replaceInline(r,{macros:!0}),u.setDefinition(t,n,r),""}},{match:s.MACRO_DEF,filter:function(e){if(c.skipMacroDefs())return"";var t=e[1],n=e[2];return n=p.replaceInline(n,{macros:!0}),s.setValue(t,n),""}},{match:/^\\?([#=]{1,6})\s+(.+?)(?:\s+\1)?$/,replacement:"<h$1>$$2</h$1>",filter:function(e){return e[1]=e[1].length.toString(),s.getValue("--header-ids")&&""===a.BlockAttributes.id&&(a.BlockAttributes.id=a.BlockAttributes.slugify(e[2])),p.replaceMatch(e,this.replacement,{macros:!0})}},{match:/^\\?\/{2}(.*)$/},{match:/^\\?<image:([^\s|]+)\|([^]+?)>$/,replacement:'<img src="$1" alt="$2">'},{match:/^\\?<image:([^\s|]+?)>$/,replacement:'<img src="$1" alt="$1">'},{match:/^\\?<<#([a-zA-Z][\w\-]*)>>$/,replacement:'<div id="$1"></div>',filter:function(e,t){return c.skipBlockAttributes()?"":p.replaceMatch(e,this.replacement,{macros:!0})}},{name:"attributes",match:/^\\?\.[a-zA-Z#"\[+-].*$/,verify:function(e){return a.BlockAttributes.parse(e)}},{match:/^\\?\.(\w+)\s*=\s*'(.*)'$/,filter:function(e){if(/^(safeMode|htmlReplacement|reset)$/.test(e[1])){if(!c.isSafeModeNz()){var t=p.replaceInline(e[2],{macros:!0});c.setOption(e[1],t)}}else c.errorCallback("illegal API option: "+e[1]+": "+e[0]);return""}}];t.render=r,t.getDefinition=i},function(e,t,n){"use strict";function r(e,t){if(e.eof())throw"premature eof";var n;return!!(n=s(e))&&(c=[],i(n,e,t),!0)}function i(e,t,n){c.push(e.id),n.write(f.BlockAttributes.inject(e.def.listOpenTag));for(var r;;){if(!(r=a(e,t,n))||r.id!==e.id)return n.write(e.def.listCloseTag),c.pop(),r;e=r}}function a(e,t,n){var r,a=e.def,f=e.match;4===f.length&&(n.write(a.termOpenTag),r=p.replaceInline(f[1],{macros:!0,spans:!0}),n.write(r),n.write(a.termCloseTag)),n.write(a.itemOpenTag);var d=new u.Writer;d.write(f[f.length-1]+"\n"),t.next();var m;for(m=o(t,d),r=d.toString().trim(),r=p.replaceInline(r,{macros:!0,spans:!0}),n.write(r);;){if(!m)return n.write(a.itemCloseTag),null;if(m.id)return-1!==c.indexOf(m.id)?(n.write(a.itemCloseTag),m):(m=i(m,t,n),n.write(a.itemCloseTag),m);var h=c;if(c=[],l.render(t,n),c=h,t.skipBlankLines(),t.eof())return n.write(a.itemCloseTag),null;m=s(t)}}function o(e,t){for(var n;;){if(e.eof())return null;if(""===e.cursor)return e.next(),e.eof()?null:""===e.cursor?null:e.eof()?null:s(e,["indented","quote-paragraph"]);if(n=s(e,["comment","code","division","html","quote"]))return n;t.write(e.cursor),t.write("\n"),e.next()}}function s(e,t){void 0===t&&(t=[]);for(var n=e.cursor,r={},i=0,a=d;i<a.length;i++){var o=a[i],s=o.match.exec(n);if(s)return"\\"===s[0][0]?(e.cursor=e.cursor.slice(1),null):(r.match=s,r.def=o,r.id=s[s.length-2],r)}for(var c=0,u=t;c<u.length;c++){var p=u[c],o=void 0;if(o=l.getDefinition(p),o.openMatch.test(n))return r}return null}Object.defineProperty(t,"__esModule",{value:!0});var c,l=n(2),u=n(8),p=n(0),f=n(0),d=[{match:/^\\?\s*(-|\+|\*{1,4})\s+(.*)$/,listOpenTag:"<ul>",listCloseTag:"</ul>",itemOpenTag:"<li>",itemCloseTag:"</li>"},{match:/^\\?\s*(?:\d*)(\.{1,4})\s+(.*)$/,listOpenTag:"<ol>",listCloseTag:"</ol>",itemOpenTag:"<li>",itemCloseTag:"</li>"},{match:/^\\?\s*(.*[^:])(:{2,4})(|\s+.*)$/,listOpenTag:"<dl>",listCloseTag:"</dl>",itemOpenTag:"<dd>",itemCloseTag:"</dd>",termOpenTag:"<dt>",termCloseTag:"</dt>"}];t.render=r}])});
//# sourceMappingURL=rimu.min.js.map